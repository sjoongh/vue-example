<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Components</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
</head>
<body>
    <!-- Vue 렌더링 영역 -->
    <div id="app">
        <global-header></global-header>
        <h2>{{ content }}</h2>
        <!-- 부모 -> 자식 데이터 내려보내기 : props를 이용 v-bind로 props바인딩 해줌 -->
        <!-- 이벤트 연결: v-on:이벤트명 -->
        <local-component :anythingyouwant="message"
            @send-msg="rcvMsg"></local-component>
        <local-component2></local-component2>
    </div>

    <script>
        // 전역 컴포넌트(component) : 인스턴스 내에서 어디든지 사용할 수 있는 컴포넌트
        // Vue.component("이름", {속성})
        Vue.component("global-header", 
            {
                template: '<div><h1>{{ title }}</h1></div>',
                // data를 title로 return 하는 일반 함수 객체
                // template는 global-header와 바인딩 되어 있으므로 브라우저에 출력됨
                data: function() {
                    return {
                        title: "Global Header"
                    }
                }
            });

        // 지역 컴포넌트 선언
        var cmp1 = {
            props: ['anythingyouwant'], // 부모로부터 전달 받은 props 데이터
            // template: '<div><h2>Local Component</h2></div>'
            template : `<div><h2>Local Component</h2>
                            <h3>{{ anythingyouwant }}</h3>
                            <button @click="sendMsg">Send to Parent</button>
                        </div>`, // click시 sendMsg라는 함수 실행
            methods: {
                // button click -> sendMsg 호출
                sendMsg: function() {
                    // cmp1이 send-msg 이벤트를 발생시킨다.
                    this.$emit("send-msg", "Message from Child");
                }
            }
        }
        // 새 인스턴스 생성
        //  new Vue({ el: '태그이름', data: { something: '어떤 것' } })
        var app = new Vue({
            el: '#app',
            data: {
                content: 'Vue Instance',
                message: 'Message From Parent' // 자식에게 보낼 데이터
            },
            // 지역 컴포넌트 등록(components), {이름 : 값}
            components: {
                'local-component' : cmp1,
                'local-component2' : {
                    template: "<div><h2>Local Component2</h2></div>"
                }
            },
            methods: {
                rcvMsg: function(message) {
                    console.log(event);
                    console.log("자식으로부터 신호가 전달되었습니다");
                    alert("자식으로부터 전달된 메시지"+ message);
                }
            }
        });
    </script>
</body>
</html>